(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[909],{25373:(e,t,s)=>{Promise.resolve().then(s.bind(s,92669)),Promise.resolve().then(s.bind(s,84106))},84106:(e,t,s)=>{"use strict";s.d(t,{LeadStats:()=>P});var a=s(95155),l=s(12115),i=s(88482),r=s(60704),o=s(53999);let d=r.bL,c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.B8,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...l})});c.displayName=r.B8.displayName;let n=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.l9,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...l})});n.displayName=r.l9.displayName;let f=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.UC,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...l})});f.displayName=r.UC.displayName;var x=s(83540),h=s(3401),m=s(94754),p=s(96025),u=s(16238),j=s(94517),b=s(83394),g=s(54811),v=s(93504),N=s(21374),w=s(8782),y=s(34e3),A=s(24026),E=s(51154),k=s(48136),O=s(64587),F=s(14503);let C=[{value:"NOVO",label:"Novo",color:"#3B82F6"},{value:"CONTATO_FEITO",label:"Contato Feito",color:"#EAB308"},{value:"QUALIFICADO",label:"Qualificado",color:"#22C55E"},{value:"N\xc3O_QUALIFICADO",label:"N\xe3o Qualificado",color:"#EF4444"},{value:"QUALIFICADO_OP",label:"Qualificado OP",color:"#A855F7"},{value:"PROPOSTA",label:"Proposta",color:"#F97316"},{value:"FECHADO",label:"Fechado",color:"#14B8A6"}],S=["#2E0854","#CAFF00","#4B0082","#9FCC00","#1A0330","#E5FF66"],I=Math.PI/180,D=e=>{let{cx:t,cy:s,midAngle:l,innerRadius:i,outerRadius:r,percent:o}=e,d=i+(r-i)*.5,c=t+d*Math.cos(-l*I),n=s+d*Math.sin(-l*I);return o<.05?null:(0,a.jsx)("text",{x:c,y:n,fill:"white",textAnchor:c>t?"start":"end",dominantBaseline:"central",fontSize:12,children:"".concat((100*o).toFixed(0),"%")})};function P(){let[e,t]=(0,l.useState)(!0),[s,r]=(0,l.useState)([]),[o,I]=(0,l.useState)(window.innerWidth),P="casaprimavera",[R,L]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{let e=()=>{I(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,l.useEffect)(()=>{(async()=>{try{if(await (0,O.Bp)("9",P)){L(!1);let e=await fetch("https://backend-ingressar.onrender.com/metropole/v1/data/".concat("9","/").concat(P)),t=e.ok?await e.json():[];r(t)}else{console.log("\uD83C\uDFAD API n\xe3o dispon\xedvel, usando dados mockados para gr\xe1ficos"),O.I_.enableMock(),L(!0);let e=await O.I_.fetchLeads("9",P);r(e),(0,F.oR)({title:"Modo Demo - Gr\xe1ficos",description:"Exibindo estat\xedsticas com dados de demonstra\xe7\xe3o",variant:"default"})}}catch(e){console.error("Erro ao buscar dados:",e);try{console.log("\uD83C\uDFAD Erro na API, usando dados mockados como fallback para gr\xe1ficos"),O.I_.enableMock(),L(!0);let e=await O.I_.fetchLeads("9",P);r(e),R||(0,F.oR)({title:"Modo Demo - Gr\xe1ficos",description:"Erro na API, usando dados de demonstra\xe7\xe3o",variant:"default"})}catch(e){console.error("Erro mesmo com dados mockados:",e)}}finally{t(!1)}})()},[]),e)return(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"flex justify-center items-center h-40 sm:h-60",children:(0,a.jsx)(E.A,{className:"h-8 w-8 animate-spin text-primary"})})});let B=(()=>{let e={};return s.forEach(t=>{let s=t.interessePrincipal||"N\xe3o especificado";e[s]=(e[s]||0)+1}),Object.entries(e).map(e=>{let[t,s]=e;return{name:t,value:s}})})(),W=(()=>{let e={};return s.forEach(t=>{let s=new Date(t.createdAt).toLocaleDateString("pt-BR");e[s]=(e[s]||0)+1}),Object.entries(e).map(e=>{let[t,s]=e;return{date:t,count:s}}).sort((e,t)=>{let[s,a,l]=e.date.split("/"),[i,r,o]=t.date.split("/");return new Date("".concat(l,"-").concat(a,"-").concat(s)).getTime()-new Date("".concat(o,"-").concat(r,"-").concat(i)).getTime()}).slice(-(o<768?7:15))})(),Z=(()=>{let e={};return C.forEach(t=>{e[t.value]=0}),s.forEach(t=>{let s=t.field03||"NOVO";void 0!==e[s]&&e[s]++}),C.map(t=>({name:t.label,value:e[t.value],color:t.color}))})(),T=()=>o<640?200:o<1024?250:300,_=()=>o<640?8:10;return(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6 w-full overflow-hidden",children:[(0,a.jsx)(i.Zp,{className:"bg-primary border-white/20",children:(0,a.jsx)(i.Wu,{className:"p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(k.A,{className:"h-6 w-6 text-secondary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white",children:"Casa Primavera - Estat\xedsticas"}),(0,a.jsx)("p",{className:"text-white/90 text-sm",children:"An\xe1lise completa dos leads de moda e confec\xe7\xe3o"})]})]})})}),(0,a.jsxs)(d,{defaultValue:"status",children:[(0,a.jsx)("div",{className:"w-full overflow-x-auto scrollbar-thin",children:(0,a.jsxs)(c,{className:"mb-4 bg-primary w-full flex-nowrap",children:[(0,a.jsx)(n,{value:"status",className:"data-[state=active]:bg-secondary data-[state=active]:text-primary text-white",children:"Status"}),(0,a.jsx)(n,{value:"timeline",className:"data-[state=active]:bg-secondary data-[state=active]:text-primary text-white",children:"Linha do Tempo"}),(0,a.jsx)(n,{value:"interests",className:"data-[state=active]:bg-secondary data-[state=active]:text-primary text-white",children:"Interesses"})]})}),(0,a.jsx)(f,{value:"status",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"grid gap-2 grid-cols-2 md:grid-cols-4",children:[(0,a.jsxs)(i.Zp,{className:"border-white/20",children:[(0,a.jsx)(i.aR,{className:"pb-2 bg-primary text-white p-2 sm:p-3",children:(0,a.jsx)(i.ZB,{className:"text-xs sm:text-sm font-medium",children:"Total de Leads"})}),(0,a.jsxs)(i.Wu,{className:"pt-2 p-2 sm:p-3",children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-white",children:s.length}),(0,a.jsx)("p",{className:"text-xs text-white/70 mt-1",children:"Leads de arquitetura"})]})]}),(0,a.jsxs)(i.Zp,{className:"border-white/20",children:[(0,a.jsx)(i.aR,{className:"pb-2 bg-secondary text-primary p-2 sm:p-3",children:(0,a.jsx)(i.ZB,{className:"text-xs sm:text-sm font-medium",children:"Leads Qualificados"})}),(0,a.jsxs)(i.Wu,{className:"pt-2 p-2 sm:p-3",children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-white",children:s.filter(e=>"QUALIFICADO"===e.field03||"QUALIFICADO_OP"===e.field03).length}),(0,a.jsxs)("p",{className:"text-xs text-white/70 mt-1",children:[s.length>0?Math.round(s.filter(e=>"QUALIFICADO"===e.field03||"QUALIFICADO_OP"===e.field03).length/s.length*100):0,"% do total"]})]})]}),(0,a.jsxs)(i.Zp,{className:"border-white/20",children:[(0,a.jsx)(i.aR,{className:"pb-2 bg-primary text-white p-2 sm:p-3",children:(0,a.jsx)(i.ZB,{className:"text-xs sm:text-sm font-medium",children:"Em Proposta"})}),(0,a.jsxs)(i.Wu,{className:"pt-2 p-2 sm:p-3",children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-white",children:s.filter(e=>"PROPOSTA"===e.field03).length}),(0,a.jsxs)("p",{className:"text-xs text-white/70 mt-1",children:[s.length>0?Math.round(s.filter(e=>"PROPOSTA"===e.field03).length/s.length*100):0,"% do total"]})]})]}),(0,a.jsxs)(i.Zp,{className:"border-white/20",children:[(0,a.jsx)(i.aR,{className:"pb-2 bg-secondary text-primary p-2 sm:p-3",children:(0,a.jsx)(i.ZB,{className:"text-xs sm:text-sm font-medium",children:"Fechados"})}),(0,a.jsxs)(i.Wu,{className:"pt-2 p-2 sm:p-3",children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold text-white",children:s.filter(e=>"FECHADO"===e.field03).length}),(0,a.jsxs)("p",{className:"text-xs text-white/70 mt-1",children:["Taxa de convers\xe3o:"," ",s.length>0?Math.round(s.filter(e=>"FECHADO"===e.field03).length/s.length*100):0,"%"]})]})]})]}),(0,a.jsxs)(i.Zp,{className:"border-white/20",children:[(0,a.jsxs)(i.aR,{className:"bg-primary text-white p-2 sm:p-3",children:[(0,a.jsx)(i.ZB,{className:"text-base sm:text-lg",children:"Distribui\xe7\xe3o por Status - Casa Primavera"}),(0,a.jsx)(i.BT,{className:"text-white/80 text-xs sm:text-sm",children:"Visualiza\xe7\xe3o do funil de vendas de moda e confec\xe7\xe3o"})]}),(0,a.jsx)(i.Wu,{className:"pt-4 p-2 sm:p-4",children:(0,a.jsx)("div",{style:{height:T(),width:"100%"},children:(0,a.jsx)(x.u,{width:"100%",height:"100%",children:(0,a.jsxs)(h.E,{data:Z,margin:{top:10,right:10,left:0,bottom:o<640?60:40},children:[(0,a.jsx)(m.d,{strokeDasharray:"3 3",stroke:"#ffffff20"}),(0,a.jsx)(p.W,{dataKey:"name",angle:o<640?-90:-45,textAnchor:"end",height:o<640?60:40,tick:{fontSize:_(),fill:"#ffffff80"},interval:0}),(0,a.jsx)(u.h,{tick:{fontSize:_(),fill:"#ffffff80"}}),(0,a.jsx)(j.m,{contentStyle:{backgroundColor:"#2E0854",border:"1px solid #ffffff20",borderRadius:"8px",fontSize:o<640?"12px":"14px"},labelStyle:{color:"#ffffff"}}),(0,a.jsx)(b.y,{dataKey:"value",radius:[4,4,0,0],children:Z.map((e,t)=>(0,a.jsx)(g.f,{fill:e.color},"cell-".concat(t)))})]})})})})]})]})}),(0,a.jsx)(f,{value:"timeline",children:(0,a.jsxs)(i.Zp,{className:"border-white/20",children:[(0,a.jsxs)(i.aR,{className:"bg-primary text-white p-3 sm:p-4",children:[(0,a.jsx)(i.ZB,{className:"text-base sm:text-lg",children:"Leads por Data"}),(0,a.jsx)(i.BT,{className:"text-white/80 text-xs sm:text-sm",children:"Evolu\xe7\xe3o temporal dos leads de arquitetura"})]}),(0,a.jsx)(i.Wu,{className:"p-3 sm:p-4",children:(0,a.jsx)("div",{style:{height:T(),width:"100%"},children:(0,a.jsx)(x.u,{width:"100%",height:"100%",children:(0,a.jsxs)(v.b,{data:W,margin:{top:10,right:10,left:0,bottom:o<640?40:20},children:[(0,a.jsx)(m.d,{strokeDasharray:"3 3",stroke:"#ffffff20"}),(0,a.jsx)(p.W,{dataKey:"date",angle:o<640?-45:0,textAnchor:o<640?"end":"middle",height:o<640?40:30,tick:{fontSize:_(),fill:"#ffffff80"},interval:o<640?"preserveStartEnd":0}),(0,a.jsx)(u.h,{tick:{fontSize:_(),fill:"#ffffff80"}}),(0,a.jsx)(j.m,{contentStyle:{backgroundColor:"#2E0854",border:"1px solid #ffffff20",borderRadius:"8px",fontSize:o<640?"12px":"14px"},labelStyle:{color:"#ffffff"}}),(0,a.jsx)(N.N,{type:"monotone",dataKey:"count",stroke:"#CAFF00",strokeWidth:2,dot:{fill:"#CAFF00",strokeWidth:2,r:o<640?3:4},activeDot:{r:o<640?5:6,fill:"#CAFF00"}})]})})})})]})}),(0,a.jsx)(f,{value:"interests",children:(0,a.jsxs)(i.Zp,{className:"border-white/20",children:[(0,a.jsxs)(i.aR,{className:"bg-primary text-white p-3 sm:p-4",children:[(0,a.jsx)(i.ZB,{className:"text-base sm:text-lg",children:"Distribui\xe7\xe3o por Interesse"}),(0,a.jsx)(i.BT,{className:"text-white/80 text-xs sm:text-sm",children:"Tipos de projetos mais procurados"})]}),(0,a.jsx)(i.Wu,{className:"p-3 sm:p-4",children:(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[(0,a.jsx)("div",{style:{height:T(),width:"100%"},children:(0,a.jsx)(x.u,{width:"100%",height:"100%",children:(0,a.jsxs)(w.r,{children:[(0,a.jsx)(y.F,{data:B,cx:"50%",cy:"50%",labelLine:!1,label:D,outerRadius:o<640?60:80,fill:"#8884d8",dataKey:"value",children:B.map((e,t)=>(0,a.jsx)(g.f,{fill:S[t%S.length]},"cell-".concat(t)))}),(0,a.jsx)(j.m,{contentStyle:{backgroundColor:"#2E0854",border:"1px solid #ffffff20",borderRadius:"8px",fontSize:o<640?"12px":"14px"}}),o>=768&&(0,a.jsx)(A.s,{})]})})}),(0,a.jsx)("div",{style:{height:T(),width:"100%"},children:(0,a.jsx)(x.u,{width:"100%",height:"100%",children:(0,a.jsxs)(h.E,{data:B,margin:{top:10,right:10,left:0,bottom:o<640?40:20},children:[(0,a.jsx)(m.d,{strokeDasharray:"3 3",stroke:"#ffffff20"}),(0,a.jsx)(p.W,{dataKey:"name",angle:o<640?-45:0,textAnchor:o<640?"end":"middle",height:o<640?40:30,tick:{fontSize:_(),fill:"#ffffff80"}}),(0,a.jsx)(u.h,{tick:{fontSize:_(),fill:"#ffffff80"}}),(0,a.jsx)(j.m,{contentStyle:{backgroundColor:"#2E0854",border:"1px solid #ffffff20",borderRadius:"8px",fontSize:o<640?"12px":"14px"}}),(0,a.jsx)(b.y,{dataKey:"value",radius:[4,4,0,0],children:B.map((e,t)=>(0,a.jsx)(g.f,{fill:S[t%S.length]},"cell-".concat(t)))})]})})})]})})]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[778,862,750,441,684,358],()=>t(25373)),_N_E=e.O()}]);